<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>t-tests</title>
    <meta charset="utf-8" />
    <meta name="author" content="Pablo E. Gutierrez-Fonseca" />
    <meta name="date" content="2024-10-04" />
    <script src="libs/header-attrs-2.28/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
    <script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
    <script src="libs/d3-3.3.8/d3.min.js"></script>
    <script src="libs/dagre-0.4.0/dagre-d3.min.js"></script>
    <link href="libs/mermaid-0.3.0/dist/mermaid.css" rel="stylesheet" />
    <script src="libs/mermaid-0.3.0/dist/mermaid.slim.min.js"></script>
    <link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
    <script src="libs/chromatography-0.1/chromatography.js"></script>
    <script src="libs/DiagrammeR-binding-1.0.11/DiagrammeR.js"></script>
    <link rel="stylesheet" href="css/nhsr.css" type="text/css" />
    <link rel="stylesheet" href="css/nhsr-fonts.css" type="text/css" />
    <link rel="stylesheet" href="css/custom.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# t-tests
]
.subtitle[
## Tests between the means of different groups
]
.author[
### Pablo E. Gutierrez-Fonseca
]
.date[
### 2024-10-04
]

---



# When would you run a t-test?

- You have a continuous response variable.

- You want to test for a **difference between two sample means**: considering the variance within each group, do the groups belong to two distinct populations, or not?

- Data is **normally distributed** and both groups have approximately **equal variance**. 

- If the groups are **not related** in any way = **Independent t-test**

- If the groups are **related (paired)** = Dependent t-test (or matched pairs t-test).


---

# Independent vs. Dependent groups

How do I know if my samples are independent or dependent?  

Can you tell exactly which observation should be paired with which other observation?  If you canâ€™t tell, your groups are independent

.pull-left[
**Examples of Independent Samples**

1. Treated and untreated, randomly located plots.
2. Monitoring sites set up with Systematic (grid) sampling.
3. Infested and uninfested forest stands selected with stratified random sampling.
]

.pull-right[
**Examples of Dependent Samples**

1. Before and After data taken on the same observation.
2. Paired watersheds / plots.
3. Parent / offspring studies.
4. Twin studies / partner studies. 
]

---

# Independent vs. Dependent groups

.pull-left[
**Independent t-test** quantifies the difference between sample means (numerator) vs. the amount of variability in the samples (denominator). 


$$
t = \frac{\bar{X}_1 - \bar{X}_2}{\sqrt{\frac{(n_1 - 1)s_1^2 + (n_2 - 1)s_2^2}{n_1 + n_2 - 2} \left( \frac{1}{n_1} + \frac{1}{n_2} \right)}}
$$
DF (for the critical value)= (n1 + n2)-2

]


.pull-right[
**Dependent t-test** quantifies the magnitude of the difference between paired observations (numerator) vs. the amount of variability in the samples (denominator).

$$
t = \frac{\sum D}{\sqrt{\frac{n \sum D^2 - (\sum D)^2}{n-1}}}
$$

DF (for the critical value) = n-1    
where n is the number of paired observations


]

---

# Basic Steps for an Inferential t-Test

.pull-left[ 


``` r
t.test(x= , y = ,
       mu = 0, 
       paired = , 
       var.equal= .
       alternative = c("two.sided", "less", "greater"))
```

&lt;br&gt;


``` r
wilcox.testt(x= , y = ,
       mu = 0, 
       paired = , 
       var.equal= .
       alternative = c("two.sided", "less", "greater"))
```

]


.pull-right[ 

&lt;center&gt;

<div class="DiagrammeR html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-97f61777858aec308073" style="width:504px;height:504px;"></div>
<script type="application/json" data-for="htmlwidget-97f61777858aec308073">{"x":{"diagram":"\n\n  graph TD\n    A[Normally distribute data?]--Yes--> B[t.test]\n    A[Normally distribute data?]--No--> C[wilcox.test]\n    \n  style A fill:lightblue,stroke:#333,stroke-width:1px\n  style B fill:lightblue,stroke:#333,stroke-width:1px\n  style C fill:lightblue,stroke:#333,stroke-width:1px\n\n"},"evals":[],"jsHooks":[]}</script>

&lt;/center&gt;
]


---

# Basic Steps for an Inferential t-Test


.pull-left[ 

``` r
t.test(x= , y = ,
       mu = 0, 
       `paired = `, 
       var.equal= ,
       alternative = c("two.sided", "less", "greater")
       )
```
]


.pull-right[ 
&lt;center&gt;

<div class="DiagrammeR html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-c00d687ad01d1f63d865" style="width:504px;height:504px;"></div>
<script type="application/json" data-for="htmlwidget-c00d687ad01d1f63d865">{"x":{"diagram":"\ngraph TD;\n    A[Paired?]--Yes--> B[Dependend t-test, use paired=TRUE]\n    A[Paired?]--No--> C[Independend t-test, use paired=FALSE]\n    \n"},"evals":[],"jsHooks":[]}</script>
&lt;/center&gt;

]


---

# Basic Steps for an Inferential t-Test


.pull-left[ 

``` r
t.test(x= , y = ,
       mu = 0, 
       paired = , 
       `var.equal= `, 
       alternative = c("two.sided", "less", "greater")
       )
```
]


.pull-right[ 
&lt;center&gt;

<div class="DiagrammeR html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-af8680f9a1ab1dfdb672" style="width:504px;height:504px;"></div>
<script type="application/json" data-for="htmlwidget-af8680f9a1ab1dfdb672">{"x":{"diagram":"\ngraph TD;\n    A[Equal variance?] -->|Yes| B[Set var.equal to TRUE];\n    A -->|No| C[Set var.equal to FALSE];\n"},"evals":[],"jsHooks":[]}</script>

&lt;/center&gt;
]


---

# Basic Steps for an Inferential t-Test


.pull-left[ 

``` r
t.test(x= , y = ,
       mu = 0, 
       paired = , 
       var.equal= , 
       `alternative = c("two.sided", "less", "greater")`
       )
```
]


.pull-right[ 
&lt;center&gt;

<div class="DiagrammeR html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-6e1416347511e263bc95" style="width:504px;height:504px;"></div>
<script type="application/json" data-for="htmlwidget-6e1416347511e263bc95">{"x":{"diagram":"\ngraph TD;\n    A[Two-sided?] -->|Yes| B[Use alternative = 'less'];\n    A -->|Yes| C[Use alternative = 'greater'];\n    A -->|No| D[Use alternative = 'two.sided'];\n"},"evals":[],"jsHooks":[]}</script>
&lt;/center&gt;
]


---

# Step in R

1. Import libraries and/or install packages.

2. Import your data.

3. Run descriptive statistics.

4. Visualize your distribution.

5. Test for normality.

6. Test for equal variance.

7. Determine if the test is paired or unpaired.

8. Run the code for the appropriate test.

---


# Effect Size (Cohen's)

- Effect size is a measure of how different two groups are from one another.


.pull-left[
**Independent t-test**


$$
ES = \frac{\bar{X}_1 - \bar{X}_2}{SD}
$$

]


.pull-right[
**Dependent t-test** 
$$
ES = \frac{\bar{X}_D}{SD}
$$
Where: `\(\bar{X}_D\)` is the mean of the differences between paired observations, and SD is the standard deviation of the differences.


]



---

# Effect Size (Cohen's)

- Effect size is a measure of how different two groups are from one another.


.pull-left[
**Independent t-test**


$$
ES = \frac{\bar{X}_1 - \bar{X}_2}{SD}
$$

&lt;br&gt;
&lt;br&gt;
&lt;br&gt;

- Cohen's ES (d)  
  - Small = 0.0 - .20  
  - Medium = 0.20 - 0.50  
  - Large = 0.50 and above  



]


.pull-right[
**Dependent t-test** 
$$
ES = \frac{\bar{X}_D}{SD}
$$
Where: `\(\bar{X}_D\)` is the mean of the differences between paired observations, and SD is the standard deviation of the differences.

]

---

# The Basic Steps for an Inferential Test in R

- Start with a research question and your data ready.

- Follow these steps:
1. State your hypothesis. 
2. Work in R
    - Import libraries and load necessary packages.
    - Import your data.
    - Run descriptive statistics to understand your data.
    - Visualize the data distribution.
    - est for normality and check other assumptions (e.g., equal variance).
3. Select the appropriate statistical test. 
4. Run the analysis in R and evaluate statistical significance.
5. Calculate Cohen's Effect Size (if relevant).
5. Summarize your findings.

---
# Two-tailed t-test Example

**Research Question**:  The state is looking to choose a stream for habitat restoration for native trout species.  Streams with deeper pools will provide necessary cover in the winter months and minimize potential scouring from severe rain events.  Which stream should they focus on?  Test to see if there is a significant difference in depth between stream 1 and stream 2?


``` r
stream_data &lt;- read.csv('Lecturer Practice/waterdata.csv')
head(stream_data)
```

```
##   X waterbody depth_cm
## 1 1   stream1     42.6
## 2 2   stream1     48.4
## 3 3   stream1     46.2
## 4 4   stream1     44.2
## 5 5   stream1     44.4
## 6 6   stream1     50.6
```

---


``` r
t.test(depth_cm ~ waterbody, data=stream_data,
       alternative = c("two.sided"),
       mu = 0, 
       paired = FALSE, 
       var.equal = TRUE,
       conf.level = 0.95)
```

```
## 
## 	Two Sample t-test
## 
## data:  depth_cm by waterbody
*## t = -12.924, df = 69, p-value &lt; 2.2e-16
## alternative hypothesis: true difference in means between group stream1 and group stream2 is not equal to 0
## 95 percent confidence interval:
##  -13.298846  -9.742143
## sample estimates:
## mean in group stream1 mean in group stream2 
##              44.42424              55.94474
```

---

# Summary

.red[We tested to see if there was a significant difference in pool depth between Stream 1 and Stream 2, which are being considered for habitat restoration for native trout species.] .orange[Using a two-tailed independent t-test to compare depth measurements from 71 total samples,] .blue[we found a significant and meaningful difference between the streams (t(69) = -12.92, p &lt; 2.2e-16).] .darkgray[This indicates that Stream 2, with deeper pools, may provide more suitable habitat for trout, offering better cover during winter and reducing the risk of scouring during severe rain events.]


    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightLanguage": "r",
"highlightStyle": "github",
"highlightLines": true,
"highlightSpans": true,
"countIncrementalSlides": true,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>
<style>
.logo {
  background-image: url(css/logo.png);
  background-size: contain;
  background-repeat: no-repeat;
  position: absolute;
  top: 1em;
  right: 1em;
  width: 110px;
  height: 128px;
  z-index: 0;
}
</style>

<script>
document
  .querySelectorAll(
    '.remark-slide-content' +
    ':not(.title-slide)' +
    // add additional classes to exclude here, e.g.
    // ':not(.inverse)' +
    ':not(.hide-logo)'
  )
  .forEach(el => {
    el.innerHTML += '<div class="logo"></div>';
  });
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
